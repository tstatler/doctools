name: PushNotifications
methods:
  - name: channels_query
    summary: Channels Query
    description: |
        Returns a list of push notification channels the user is subscribed to.

        For application admins, if the `user_id` parameter is not specified, returns all channels
        with subscribed users.
    url: push_notfication/channels/query.json
    login-required: true

    parameters:

      - name: user_id
        description: |
            User to retrieve subscribed channels for.

            Only application admins can query subscribed channels of a user.
        type: String

      - name: page  
        description: Request page number, default is 1.
        type: Number
      
      - name: per_page
        description: Number of results per page, default is 10.
        type: Number

    response-parameters:
      - name: push_channels
        description: |
            List of subscribed channels.
        type: Array<String>

    examples:
      - platform: titanium
        example: |
            This API is not yet supported in the `ti.cloud` module.

      - platform: rest
        example: |
            Example cURL request:
            
                $ curl -b cookies.txt -c cookies.txt "https://api.cloud.appcelerator.com/v1/push_notification/channels/query.json?key=<YOUR APP API KEY>"
                
            Example JSON response:
            
                {
                  "meta": {
                    "status": "ok",
                    "code": 200,
                    "method_name": "queryPushChannels",
                    "page": 1,
                    "per_page": 10,
                    "total_pages": 1,
                    "total_results" : 2
                  },
                  "response": {
                    "channels": [
                      "friend_request",
                      "chat"
                    ]
                  }
                }
                
      - platform: android
        example: |
            Example Android call:
            
                Cocoafish sdk = new Cocoafish("<YOUR APP APP KEY>"); // app key
                //Cocoafish sdk = new Cocoafish("<OAuth Key>", "<OAuth Secret>"); // OAuth key & secret
                CCResponse response = sdk.sendRequest("push_notification/channels/query.json", CCRequestMethod.GET, null);
                
            SDK Callback:
            
                JSONObject responseJSON = response.getResponseData();
                CCMeta meta = response.getMeta();
                if("ok".equals(meta.getStatus()) 
                    && meta.getCode() == 200 
                    && "queryPushChannels".equals(meta.getMethod())) {
                  JSONArray channels = responseJSON.getJSONArray("push_channels");
                  ...
                }

      - platform: ios
        example: |
            Example iOS call:
                
                CCRequest *request = [[[CCRequest alloc] initWithDelegate:self httpMethod:@"GET" baseUrl:@"push_notification/channels/query.json" ] autorelease];
                [request startAsynchronous];
                [request release];
            
            SDK Callback:
                
                -(void)ccrequest:(CCRequest *)request didSucceed:(CCResponse *)response
                {

                }
                
