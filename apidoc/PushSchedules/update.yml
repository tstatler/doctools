name: PushSchedules
methods:
  - name: update
    summary: update
    description: |
        Updates a scheduled push notification. All parameters specified in 
        the PushSchedules {@link PushSchedules#create} method can be updated, with the following exceptions:

          * The schedule's start time cannot be updated, and the `start_time` parameter is ignored, if provided.
          * When specifying a new `end_time` parameter, the new date and time must be greater than 
            the current time, and the previously specified `end_time` value must not have expired.

        This feature is only available for Enterprise users. Also, the current user must be an 
        application administrator to invoke the command.

    url: push_schedule/update.json
    http-method: POST
    login-required: true
    admin-required: true

    parameters: 

      - name: schedule
        description: |
            Push notification to schedule.

              * *name* (String): Arbitrary name to give to the scheduled push notification.
              * *push_notification* (Hash): Push notification to send (**required**).
              
                  * *channel* (String): Name of the channel to send the push notification to.
                  * *payload* (Hash): Payload to send to the device. Same format as {@link PushNotifications#notify} (**required**).
                  * *to_ids* (Array<String>/String): Array or comma-separated list of IDs to send push notifications to.
                  * *options* (Hash): Dictionary to specify additional options:
                      * *expire_after_seconds* (Number): Expiration time in seconds of when to stop
                        sending the push notification based on the start date. For example, if the push
                        notification is scheduled to be sent in a week and the expiration time is for a
                        day.  The push expires in eight days and will not be sent if the user's device
                        has been off before the send day and after the end of the expiration period.
         
              * *recurrence* (Hash): Schedules the recurrence of the push notification.

                   * *interval* (String): Set to either `daily`, `weeky` or `monthly`.
                   * *end_time* (Date): Datetime to end the push notifications in ISO 8601 format. 
                   Value must be greater than the current date and time, and the previous `end_time` must not have expired.
    
        type: Hash
        required: true

      - name: id
        description: |
            ID of the PushSchedule object returned by {@link PushSchedules#create}.
        type: String
        required: true

    response-parameters:
      - name: push_schedules
        description: |
            A single-element array containing the updated scheduled push object.
        type: Array<PushSchedules>
      
    examples:

      - platform: titanium
        example: |
            This method is not supported by Titanium.

      - platform: rest
        example: |
            The following cURL command updates just the `payload` of the scheduled push notification.

              curl -X PUT -b cookies.txt -c cookies.txt -F "id=<PUSH_NOTIFICTION_ID>" -F 'schedule={"start_time":"2016-12-25T00:00", "name":"test", "push_notification":{"channel":"test","payload":"test schedule"}, "recurrence":{"interval":"daily", "end_time":"2017-03-25T00:00"}}' "https://api.cloud.appcelerator.com/v1/push_schedules/update.json?key=g5d7G8agFnzjOJ5kV2qjhIaKp9Hi4EXW"

            Example JSON response:

              {
                "meta": {
                  "code": 200,
                  "status": "ok",
                  "method_name": "updatePushSchedule"
                },
                "response": {
                  "push_schedules": [
                    {
                      "id": "5357f7055714f51855013525",
                      "name": "test",
                      "start_time": "2016-12-25T00:00:00+0000",
                      "push_notification": {
                        "channel": "test",
                        "payload": "test schedule"
                      },
                      "recurrence": {
                        "interval": "daily",
                        "end_time": "2017-03-25T00:00:00+0000"
                      }
                    }
                  ]
                }
              }


