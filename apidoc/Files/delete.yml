name: Files
methods:
  - name: delete
    summary: Delete a File
    description: |
        Deletes the file. To delete a file, the current user must be one of the following:

        *   the file's owner
        *   a user with write priviledges granted by the file's ACL
        *   an application admin

    url: files/delete.json
    http-method: DELETE
    login-required: true

    parameters:
      - name: file_id
        description: ID of the file to delete.
        type: String
        required: true

      - name: user_id
        description: |
            User to delete the File object on behalf of. The user must be the creator of the object.

            The current user must be an application admin to delete the File object on
            behalf of another user.
        type: String

      - name: pretty_json
        description: | 
            Determines if the JSON response is formatted for readability (`true`), or displayed on a
            single line (`false`). Default is `false`.
        type: Boolean        

    examples:
      - platform: titanium
        example: |
            This example deletes a file and checks the response.

                Cloud.Files.remove({
                    file_id: savedFileId
                }, function (e) {
                    if (e.success) {
                        alert('Removed');
                    } else {
                        alert('Error:\n' +
                            ((e.error && e.message) || JSON.stringify(e)));
                    }
                });

      - platform: rest
        example: |
            Example cURL request:

                $ curl -b cookies.txt -c cookies.txt -X DELETE "https://api.cloud.appcelerator.com/v1/files/delete.json?key=<YOUR APP APP KEY>&pretty_json=true&file_id=4f05446bc3666eb7ba000001"

            Example JSON response:

                {
                  "meta": {
                    "status":"ok",
                    "code":200,
                    "method_name":"deleteFile"
                  }
                }

      - platform: ios
        example: |
            Example iOS call:

                NSDictionary *data = @{
                                         @"file_id" : @"savedFileId"
                                      };
                [APSFiles remove:data withBlock:^(APSResponse *e) {
                    if (e.success){
                      [[[UIAlertView alloc] initWithTitle:@"Success" 
                                                  message:@"File Removed"
                                                 delegate:nil 
                                        cancelButtonTitle:@"OK" 
                                        otherButtonTitles:nil] show];
                      
                    } else {
                        [[[UIAlertView alloc] initWithTitle:@"Error"
                                                    message:e.errorMessage
                                                   delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil] show];
                    }
                }];

      - platform: ios-acssdk
        example: |
            Example iOS call:

                NSDictionary *paramDict = [NSDictionary dictionaryWithObjectsAndKeys:(CCFile *)file.objectId, @"file_id", nil];
                CCRequest *request = [[CCRequest alloc] initWithDelegate:self httpMethod:@"DELETE" baseUrl:@"files/delete.json" paramDict:paramDict];
                [request startAsynchronous];
                [request release];

            SDK Callback:

                -(void)ccrequest:(CCRequest *)request didSucceed:(CCResponse *)response
                {
                	if ([response.meta.method isEqualToString:@"deleteFile"]) {
                		NSLog(@"File deleted!");
                	}
                }

      - platform: android
        example: |
            Example Android APS SDK call:

                APSServiceManager.getInstance().enable(getApplicationContext(), 'APS_APP_KEY');
                final Activity currentActivity = this;

                HashMap<String, Object> data = new HashMap<String, Object>();
                data.put("file_id", "4f05446bc3666eb7ba000001");

                try {
                    APSFiles.remove(null, new APSResponseHandler() {

                        @Override
                        public void onResponse(final APSResponse e) {
                            if (e.getSuccess()) {
                                new AlertDialog.Builder(currentActivity)
                                .setTitle("Success!").setMessage("Removed!")
                                .setPositiveButton(android.R.string.ok, null)
                                .setIcon(android.R.drawable.ic_dialog_info)
                                .show();
                            } else {
                                Log.e("APSFiles", "ERROR: " + e.getMessage());
                            }
                        }

                        @Override
                        public void onException(final APSCloudException e) {
                            Log.e("APSFiles", "Exception throw: " + e.toString());
                        }
                    });
                } catch (APSCloudException e) {
                    Log.e("APSFiles", "Exception thrown: " + e.toString());
                }


      - platform: android-acssdk
        example: |
            Example Android call:

                ACSClient sdk = new ACSClient("<YOUR APP APP KEY>"); // app key
                //ACSClient sdk = new ACSClient("<OAuth Key>", "<OAuth Secret>"); // OAuth key & secret

                Map<String, Object> data = new HashMap<String, Object>();
                data.put("file_id", "4f05446bc3666eb7ba000001");
                CCResponse response = sdk.sendRequest("files/delete.json", CCRequestMethod.DELETE, data);

            SDK Callback:

                JSONObject responseJSON = response.getResponseData();
                CCMeta meta = response.getMeta();
                if("ok".equals(meta.getStatus())
                    && meta.getCode() == 200
                    && "deleteFile".equals(meta.getMethod())) {
                  System.out.println("file deleted!");
                }

      - platform: javascript
        example: |
            Example Javascript call:

                var sdk = new Cocoafish('<YOUR APP APP KEY>');  // app key
                var data = {
                  file_id: '4f05446bc3666eb7ba000001'
                };
                sdk.sendRequest('files/delete.json', 'DELETE', data, callback);

            SDK Callback:

                function callback(data) {
                  if(data) {
                    if(data.meta) {
                      var meta = data.meta;
                      if(meta.status == 'ok' && meta.code == 200 && meta.method_name == 'deleteFile') {
                        alert("file deleted!");
                      }
                    }
                  }
                }

      - platform: actionscript
        example: |
            Example Actionscript call:

                var sdk:Cocoafish = new Cocoafish("<YOUR APP APP KEY>"); // app key
                //var sdk:Cocoafish = new Cocoafish("<OAuth Key>", "<OAuth Secret>"); // OAuth key & secret

                var data:Object = new Object();
                data.file_id = "4f05446bc3666eb7ba000001";
                sdk.sendRequest("files/delete.json", URLRequestMethod.DELETE, data, false, callback);

            SDK Callback:

                function callback(data:Object):void {
                  if(data) {
                    if(data.hasOwnProperty("meta")) {
                      var meta:Object = data.meta;
                      if(meta.status == "ok" && meta.code == 200 && meta.method_name == "deleteFile") {
                      	Alert.show("file deleted!");
                      }
                    }
                  }
                }

